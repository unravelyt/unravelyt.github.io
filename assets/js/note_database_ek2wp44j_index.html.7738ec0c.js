"use strict";(self.webpackChunkunravely_blog=self.webpackChunkunravely_blog||[]).push([[2167],{799:(s,a,n)=>{n.r(a),n.d(a,{comp:()=>l,data:()=>p});var i=n(6254);const e={},l=(0,n(1021).A)(e,[["render",function(s,a){return(0,i.uX)(),(0,i.CE)("div",null,a[0]||(a[0]=[(0,i.Fv)('<h2 id="_1-类型" tabindex="-1"><a class="header-anchor" href="#_1-类型"><span>1. 类型</span></a></h2><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>1.Embedded 嵌入式</span></span>\n<span class="line"><span>   URL jdbc:h2:〜/test表示数据库存储在用户主目录中以“ test”开头的文件中。</span></span>\n<span class="line"><span>   ”~”这个符号代表的就是当前登录到操作系统的用户对应的用户目录，所以testdatabase数据库对应的文件存放在登录到操作系统的用户对应的用户目录当中，比如我当前是使用Administrator用户登录操作系统的，所以在”C:\\Documents and Settings\\Administrator.h2”目录中就可以找到test数据库对应的数据库文件了</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span> 支持绝对位置，如jdbc:h2:/data/db/test。</span></span>\n<span class="line"><span> 在嵌入式模式下，数据库与应用程序以相同的过程运行。任何时候都只能有一个进程访问数据库。</span></span>\n<span class="line"><span> 如果您拥有权限，则不存在的数据库将自动创建。形式为jdbc:h2:./data/test的URL相对于当前工作目录（启动应用程序的目录）。</span></span>\n<span class="line"><span> 建议使用相对于〜或绝对位置的位置。</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>2.Remote (client/server) 远程连接</span></span>\n<span class="line"><span>   URL jdbc:h2:tcp://localhost/〜/test表示通过TCP / IP连接到此计算机上运行的H2 TCP服务器，</span></span>\n<span class="line"><span> 并在用户主目录中打开一个名为test的数据库。 必须首先启动服务器。 任意数量的客户端都可以连接到同一数据库。</span></span>\n<span class="line"><span> 适用与嵌入式数据库相同的位置规则。</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>3.In-Memory 内存</span></span>\n<span class="line"><span>   URL jdbc:h2:mem:test意味着打开一个名为“test”的内存数据库。数据不持久，当最后一个数据库连接关闭时，数据会丢失。</span></span>\n<span class="line"><span> 多个线程可以访问同一个数据库，但是数据只能在同一个进程中可见。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>DB_CLOSE_DELAY：要求最后一个正在连接的连接断开后，不要关闭数据库</li><li>MODE=MySQL：兼容模式，H2兼容多种数据库，该值可以为：DB2、Derby、HSQLDB、MSSQLServer、MySQL、Oracle、PostgreSQL</li><li>AUTO_RECONNECT=TRUE：连接丢失后自动重新连接</li><li>AUTO_SERVER=TRUE：启动自动混合模式，允许开启多个连接，该参数不支持在内存中运行模式</li><li>TRACE_LEVEL_SYSTEM_OUT、TRACE_LEVEL_FILE：输出跟踪日志到控制台或文件， 取值0为OFF，1为ERROR（默认值），2为INFO，3为DEBUG</li><li>SET TRACE_MAX_FILE_SIZE mb：设置跟踪日志文件的大小，默认为16M</li></ul><p>``</p><p><strong>数据库支持多种连接模式和连接设置，不同的连接模式和连接设置是通过不同的URL来区分的，URL中的设置是不区分大小写。</strong></p><table><thead><tr><th></th><th>URL Format and Examples</th></tr></thead><tbody><tr><td><a href="http://www.h2database.com/html/features.html#embedded_databases" target="_blank" rel="noopener noreferrer">Embedded (local) connection</a></td><td><code>jdbc:h2:[file:][&lt;path\\&gt;\\]&lt;databaseName&gt; jdbc:h2:~/test jdbc:h2:file:/data/sample jdbc:h2:file:C:/data/sample (Windows only) </code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#in_memory_databases" target="_blank" rel="noopener noreferrer">In-memory (private)</a></td><td><code>jdbc:h2:mem: </code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#in_memory_databases" target="_blank" rel="noopener noreferrer">In-memory (named)</a></td><td><code>jdbc:h2:mem:&lt;databaseName&gt; jdbc:h2:mem:test_mem </code></td></tr><tr><td><a href="http://www.h2database.com/html/tutorial.html#using_server" target="_blank" rel="noopener noreferrer">Server mode (remote connections) using TCP/IP</a></td><td><code>jdbc:h2:tcp://&lt;server&gt;[:&lt;port&gt;]/[&lt;path&gt;]&lt;databaseName&gt; jdbc:h2:tcp://localhost/~/test jdbc:h2:tcp://dbserv:8084/~/sample jdbc:h2:tcp://localhost/mem:test</code></td></tr><tr><td><a href="http://www.h2database.com/html/advanced.html#tls_connections" target="_blank" rel="noopener noreferrer">Server mode (remote connections) using TLS</a></td><td><code>jdbc:h2:ssl://&lt;server&gt;[:&lt;port&gt;]/&lt;databaseName&gt; jdbc:h2:ssl://localhost:8085/~/sample;</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#file_encryption" target="_blank" rel="noopener noreferrer">Using encrypted files</a></td><td><code>jdbc:h2:&lt;url&gt;;CIPHER=AES jdbc:h2:ssl://localhost/~/test;CIPHER=AES jdbc:h2:file:~/secure;CIPHER=AES</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#database_file_locking" target="_blank" rel="noopener noreferrer">File locking methods</a></td><td><code>jdbc:h2:&lt;url&gt;;FILE_LOCK={FILE|SOCKET|NO} jdbc:h2:file:~/private;CIPHER=AES;FILE_LOCK=SOCKET</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#database_only_if_exists" target="_blank" rel="noopener noreferrer">Only open if it already exists</a></td><td><code>jdbc:h2:&lt;url&gt;;IFEXISTS=TRUE jdbc:h2:file:~/sample;IFEXISTS=TRUE</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#do_not_close_on_exit" target="_blank" rel="noopener noreferrer">Don&#39;t close the database when the VM exits</a></td><td><code>jdbc:h2:&lt;url&gt;;DB_CLOSE_ON_EXIT=FALSE</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#execute_sql_on_connection" target="_blank" rel="noopener noreferrer">Execute SQL on connection</a></td><td><code>jdbc:h2:&lt;url&gt;;INIT=RUNSCRIPT FROM &#39;~/create.sql&#39; jdbc:h2:file:~/sample;INIT=RUNSCRIPT FROM &#39;~/create.sql&#39;\\;RUNSCRIPT FROM &#39;~/populate.sql&#39;</code></td></tr><tr><td><a href="http://www.h2database.com/html/advanced.html#passwords" target="_blank" rel="noopener noreferrer">User name and/or password</a></td><td><code>jdbc:h2:&lt;url&gt;[;USER=&lt;username&gt;\\][;PASSWORD=] jdbc:h2:file:~/sample;USER=sa;PASSWORD=123</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#trace_options" target="_blank" rel="noopener noreferrer">Debug trace settings</a></td><td><code>jdbc:h2:&lt;url&gt;;TRACE_LEVEL_FILE=&lt;level 0..3&gt; jdbc:h2:file:~/sample;TRACE_LEVEL_FILE=3</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#ignore_unknown_settings" target="_blank" rel="noopener noreferrer">Ignore unknown settings</a></td><td><code>jdbc:h2:&lt;url&gt;;IGNORE_UNKNOWN_SETTINGS=TRUE </code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#custom_access_mode" target="_blank" rel="noopener noreferrer">Custom file access mode</a></td><td><code>jdbc:h2:&lt;url&gt;;ACCESS_MODE_DATA=rws </code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#database_in_zip" target="_blank" rel="noopener noreferrer">Database in a zip file</a></td><td><code>jdbc:h2:zip:&lt;zipFileName&gt;!/&lt;databaseName&gt; jdbc:h2:zip:~/db.zip!/test</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#compatibility" target="_blank" rel="noopener noreferrer">Compatibility mode</a></td><td><code>jdbc:h2:&lt;url&gt;;MODE=&lt;databaseType&gt; jdbc:h2:~/test;MODE=MYSQL</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#auto_reconnect" target="_blank" rel="noopener noreferrer">Auto-reconnect</a></td><td><code>jdbc:h2:&lt;url&gt;;AUTO_RECONNECT=TRUE jdbc:h2:tcp://localhost/~/test;AUTO_RECONNECT=TRUE</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#auto_mixed_mode" target="_blank" rel="noopener noreferrer">Automatic mixed mode</a></td><td><code>jdbc:h2:&lt;url&gt;;AUTO_SERVER=TRUE jdbc:h2:~/test;AUTO_SERVER=TRUE</code></td></tr><tr><td><a href="http://www.h2database.com/html/features.html#page_size" target="_blank" rel="noopener noreferrer">Page size</a></td><td><code>jdbc:h2:&lt;url&gt;;PAGE_SIZE=512 </code></td></tr><tr><td>[Changing other settings]</td><td><code>jdbc:h2:&lt;url&gt;;&lt;setting&gt;=&lt;value&gt;[;&lt;setting&gt;=&lt;value&gt;...] jdbc:h2:file:~/sample;TRACE_LEVEL_SYSTEM_OUT=3</code></td></tr></tbody></table><h2 id="_2-内嵌多连接" tabindex="-1"><a class="header-anchor" href="#_2-内嵌多连接"><span>2. 内嵌多连接</span></a></h2><p><strong>path:</strong> D:/IdeaProjects/treasure-chest/database/src/main/resources/db/testdb.mv.db</p><p><strong>url:</strong> jdbc:h2:D:/IdeaProjects/treasure-chest/database/src/main/resources/db/testdb</p><div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spring</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  h2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #线上运行时需要设置为false，避免暴露公网</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #进行该配置，你就可以通过YOUR_URL/h2访问h2 web consloe。YOUR_URL是你程序的访问URl。默认为/h2-console</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /h2</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #进行该配置后，h2 web console就可以在远程访问了。否则只能在本机访问。</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      settings</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        web-allow-others</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  sql</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    init</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      schema-locations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> classpath:db/schema-h2.sql</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      data-locations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> classpath:db/schema-h2.sql</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  datasource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#    type: org.h2.jdbcx.JdbcConnectionPool</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> com.alibaba.druid.pool.DruidDataSource</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    druid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 内嵌模式</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jdbc:h2:./database/src/main/resources/db/testdb;AUTO_SERVER=TRUE;MODE=PostgreSQL</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 远程模式</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#      url: jdbc:h2:tcp://localhost:8081/./database/src/main/resources/db/testdb;AUTO_SERVER=TRUE;MODE=PostgreSQL</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      driver-class-name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> org.h2.Driver</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 初始连接数</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      initialSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 最小连接池数量</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      minIdle</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 最大连接池数量</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      maxActive</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置获取连接等待超时的时间</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      maxWait</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60000</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      timeBetweenEvictionRunsMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60000</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置一个连接在池中最小生存的时间，单位是毫秒</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      minEvictableIdleTimeMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 300000</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置一个连接在池中最大生存的时间，单位是毫秒</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      maxEvictableIdleTimeMillis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 900000</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置检测连接是否有效</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      validationQuery</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SELECT 1 FROM DUAL</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      webStatFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      statViewServlet</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 设置白名单，不填则允许所有访问</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        allow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 控制台登录http://localhost:8081/druid/login.html</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        url-pattern</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /druid/*</span></span>\n<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 控制台管理用户名和密码</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        login-username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> admin</span></span>\n<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        login-password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> admin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-数据类型" tabindex="-1"><a class="header-anchor" href="#_3-数据类型"><span>3. 数据类型</span></a></h2><p>由于H2是由java语言编写的，所以提供的数据类型都和java契合，下面给出数据类型列表：</p><p>1.基本的数据类型有哪些？</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">、数字方面</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">整数（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">INT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">布尔型（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">BOOLEAN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">微整数（</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">TINYINT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">小整数（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">SMALLINT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">大整数（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">BIGINT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">标识符（</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">IDENTITY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">货币数（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">DECIMAL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">双精度实数（DOUBLE）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">实数（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">REAL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">、时间方面</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">时间（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">TIME</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">日期（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">DATE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--在H2中存储为date字段类型将只有年月日</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">时间戳（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">TIMESTAMP</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">、字符文本方面</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">二进制（</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">BINARY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">其他类型（OTHER）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">可变字符串（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">VARCHAR</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">不区分大小写可变字符串（VARCHAR_IGNORECASE）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">字符（</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">CHAR</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">二进制大对象（BLOB）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">文本大对象（CLOB）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">通用唯一标识符（UUID）</span></span>\n<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">数组（</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ARRAY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.具体数据类型的简介</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>整数（INT）INT | INTEGER | MEDIUMINT | INT4 | SIGNED</span></span>\n<span class="line"><span>值的范围为： -2147483648 到 2147483647.</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Integer.</span></span>\n<span class="line"><span>例如：INT</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>布尔型（BOOLEAN）BOOLEAN | BIT | BOOL</span></span>\n<span class="line"><span>可能的值为： TRUE 和 FALSE。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Boolean.</span></span>\n<span class="line"><span>例如：BOOLEAN</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>微整数（TINYINT）TINYINT</span></span>\n<span class="line"><span>值的范围为： -128 到 127.</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Byte.</span></span>\n<span class="line"><span>例如：TINYINT</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>小整数（SMALLINT）SMALLINT | INT2 | YEAR</span></span>\n<span class="line"><span>值的范围为： -32768 到 32767.</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Short.</span></span>\n<span class="line"><span>例如：SMALLINT</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>大整数（BIGINT）BIGINT | INT8</span></span>\n<span class="line"><span>值的范围为： -9223372036854775808 到 9223372036854775807.</span></span>\n<span class="line"><span>对应到Java类型：  java.lang.Long.</span></span>\n<span class="line"><span>例如：BIGINT</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>标识符（IDENTITY）IDENTITY</span></span>\n<span class="line"><span>自增值，值的范围为： -9223372036854775808 到 9223372036854775807。使用的值不能再重用，即使事务回滚。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Long.</span></span>\n<span class="line"><span>例如：IDENTITY</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>货币数（DECIMAL）{ DECIMAL | NUMBER | DEC | NUMERIC } ( precisionInt [ , scaleInt ] )</span></span>\n<span class="line"><span>固定整数位和小数位。这个数据类型经常用于存储货币等类型的值。</span></span>\n<span class="line"><span>对应到Java类型： java.math.BigDecimal.</span></span>\n<span class="line"><span>例如：DECIMAL(20, 2)</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>双精度实数（DOUBLE）{ DOUBLE [ PRECISION ] | FLOAT | FLOAT4 | FLOAT8 }</span></span>\n<span class="line"><span>浮点数。不能应用到表示货币等值，因为有四舍五入的问题。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Double.</span></span>\n<span class="line"><span>例如：DOUBLE</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>实数（REAL）REAL</span></span>\n<span class="line"><span>单精度浮点数。不能应用到表示货币等值，因为有四舍五入的问题。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Float.</span></span>\n<span class="line"><span>例如：REAL</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>时间（TIME）TIME</span></span>\n<span class="line"><span>格式为 hh:mm:ss.</span></span>\n<span class="line"><span>对应到Java类型：java.sql.Time.</span></span>\n<span class="line"><span>例如：TIME</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>日期（DATE）DATE</span></span>\n<span class="line"><span>格式为 yyyy-MM-dd.</span></span>\n<span class="line"><span>对应到Java类型： java.sql.Date</span></span>\n<span class="line"><span>例如：DATE  &lt;span style=&quot;color:#FF0000;&quot;&gt;需要特别注意的是这里，我们在oracle中定义成date是可以保存时分秒的，而在H2中则不会&lt;/span&gt;</span></span>\n<span class="line"><span>时间戳（TIMESTAMP）</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>{ TIMESTAMP | DATETIME | SMALLDATETIME }</span></span>\n<span class="line"><span>格式为 yyyy-MM-dd hh:mm:ss[.nnnnnnnnn].</span></span>\n<span class="line"><span>对应到Java类型： java.sql.Timestamp (java.util.Date 也支持).</span></span>\n<span class="line"><span>例如：TIMESTAMP</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>二进制（BINARY）{ BINARY | VARBINARY | LONGVARBINARY | RAW | BYTEA } [ ( precisionInt ) ]</span></span>\n<span class="line"><span>表示一个字节数组。针对更长的数组，使用 BLOB 类型。最大的尺寸为 2 GB，当使用这种数据类型时，整个对象都会保存在内存中，在内存中的尺寸是一个精确的指定值，只有实际的数据会被持久化。对于大的文本数据，还是使用 BLOB 和 CLOB 更合适。</span></span>\n<span class="line"><span>对应到Java类型： byte[].</span></span>\n<span class="line"><span>例如：BINARY(1000)</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>其他类型（OTHER）OTHER</span></span>\n<span class="line"><span>这个类型允许存储可序列化的JAVA对象。在内部，使用的是一个字节数组。序列化和反序列化只在客户端端完成。反序列化仅在 getObject 被调用时才被调用。JAVA操作因为安全的原因并不能在数据库引擎内被执行。可以使用 PreparedStatement.setObject 存储对象。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.Object (或者是任何子类).</span></span>\n<span class="line"><span>例如：OTHER</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>可变字符串（VARCHAR）{ VARCHAR | LONGVARCHAR | VARCHAR2 | NVARCHAR| NVARCHAR2 | VARCHAR_CASESENSITIVE}  [ ( precisionInt ) ]</span></span>\n<span class="line"><span>Unicode 字符串。使用两个单引号(&#39;&#39;) 表示一个引用。最大的长度是Integer.MAX_VALUE，字符串的实际长度是精确指定的，仅实际的数据会被持久化。当使用这种数据类型时，整个文本都会保存在内存中。更多的文本数据，使用 CLOB 更合适。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.String.</span></span>\n<span class="line"><span>例如：VARCHAR(255)</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>不区分大小写的可变字符串（VARCHAR_IGNORECASE ）VARCHAR_IGNORECASE [ ( precisionInt ) ]</span></span>\n<span class="line"><span>与 VARCHAR 类型类似，只是在比较时不区分大小写。存储时是混合大小写存储的。当使用这种数据类型时，整个文本都会保存在内存中。更多的文本数据，使用 CLOB 更合适。</span></span>\n<span class="line"><span>例如：VARCHAR_IGNORECASE</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>字符（CHAR）</span></span>\n<span class="line"><span>{ CHAR | CHARACTER | NCHAR } [ ( precisionInt ) ]</span></span>\n<span class="line"><span>这个类型支持是针对其他数据库或老的应用的兼容性。与VARCHAR 的不同是尾空格将被忽略并且不会被持久化。 Unicode 字符串。使用两个单引号(&#39;&#39;) 表示一个引用。最大的长度是Integer.MAX_VALUE，字符串的实际长度是精确指定的，仅实际的数据会被持久化。当使用这种数据类型时，整个文本都会保存在内存中。更多的文本数据，使用 CLOB 更合适。</span></span>\n<span class="line"><span>对应到Java类型： java.lang.String.</span></span>\n<span class="line"><span>例如：CHAR(10)</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>二进制大对象（BLOB）</span></span>\n<span class="line"><span>{ BLOB | TINYBLOB | MEDIUMBLOB | LONGBLOB | IMAGE | OID } [ ( precisionInt ) ]</span></span>\n<span class="line"><span>类似于BINARY，但是针对的是非常大的值如文件或是图片。跟BINARY不同的是，大对象并不完全保存在内存中。使用 PreparedStatement.setBinaryStream 存储对象，详细请参见 CLOB 和 高级 / 大对象。</span></span>\n<span class="line"><span>对应到Java类型： java.sql.Blob (java.io.InputStream 也支持)。</span></span>\n<span class="line"><span>例如：BLOB</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>文本大对象（CLOB）</span></span>\n<span class="line"><span>{ CLOB | TINYTEXT | TEXT | MEDIUMTEXT | LONGTEXT | NTEXT | NCLOB } [ ( precisionInt ) ]</span></span>\n<span class="line"><span>CLOB类似于 VARCHAR，但是针对的是非常大的值。与 VARCHAR不同的是，CLOB 对象并不完全保存在内存中，而是使用的流。CLOB 可以用于文档或文本，如果XML、HTML文档，文本文件、未限制尺寸的备忘录等。使用 PreparedStatement.setCharacterStream 存储对象。详细请参见 高级 / 大对象。</span></span>\n<span class="line"><span>VARCHAR 用于相对较小的文本（如200个字符以内）。小的 CLOB 值被就地存储，但是也比 VARCHAR 要大。</span></span>\n<span class="line"><span>对应到Java类型： java.sql.Clob (java.io.Reader 也支持).</span></span>\n<span class="line"><span>例如：CLOB</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>通用唯一标识符（UUID）</span></span>\n<span class="line"><span>UUID</span></span>\n<span class="line"><span>UUID（Universally unique identifier），是一个128BIT的值，使用 PreparedStatement.setBytes 或 setString 去存储值。</span></span>\n<span class="line"><span>对应到Java类型： java.util.UUID.</span></span>\n<span class="line"><span>例如：UUID</span></span>\n<span class="line"><span>数组（ARRAY）ARRAY</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>一组值，可以使用值列表 (1, 2) 或 PreparedStatement.setObject(.., new Object[] {..}) 存储对象。</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>对应到Java类型： java.lang.Object[] (没有任何原始类型数组被支持).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',16)]))}]]),p=JSON.parse('{"path":"/note_database/ek2wp44j/","title":"H2数据库使用和配置","lang":"zh-CN","frontmatter":{"title":"H2数据库使用和配置","createTime":"2024/11/17 01:12:00","permalink":"/note_database/ek2wp44j/","description":"1. 类型 DB_CLOSE_DELAY：要求最后一个正在连接的连接断开后，不要关闭数据库 MODE=MySQL：兼容模式，H2兼容多种数据库，该值可以为：DB2、Derby、HSQLDB、MSSQLServer、MySQL、Oracle、PostgreSQL AUTO_RECONNECT=TRUE：连接丢失后自动重新连接 AUTO_SERVER=TR...","head":[["meta",{"property":"og:url","content":"https://www.unravely.press/note_database/ek2wp44j/"}],["meta",{"property":"og:site_name","content":"Unravely"}],["meta",{"property":"og:title","content":"H2数据库使用和配置"}],["meta",{"property":"og:description","content":"1. 类型 DB_CLOSE_DELAY：要求最后一个正在连接的连接断开后，不要关闭数据库 MODE=MySQL：兼容模式，H2兼容多种数据库，该值可以为：DB2、Derby、HSQLDB、MSSQLServer、MySQL、Oracle、PostgreSQL AUTO_RECONNECT=TRUE：连接丢失后自动重新连接 AUTO_SERVER=TR..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-25T09:48:04.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-25T09:48:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"H2数据库使用和配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-25T09:48:04.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1. 类型","slug":"_1-类型","link":"#_1-类型","children":[]},{"level":2,"title":"2. 内嵌多连接","slug":"_2-内嵌多连接","link":"#_2-内嵌多连接","children":[]},{"level":2,"title":"3. 数据类型","slug":"_3-数据类型","link":"#_3-数据类型","children":[]}],"readingTime":{"minutes":9.52,"words":2855},"git":{"createdTime":1731778103000,"updatedTime":1735120084000,"contributors":[{"name":"banxia","email":"yutong9717@163.com","commits":1}]},"autoDesc":true,"filePathRelative":"notes/note_database/3.Embedded/H2数据库.md","bulletin":false}')}}]);