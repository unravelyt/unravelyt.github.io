<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.18" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://www.unravely.press/note_database/tuzwwskm/"><meta property="og:site_name" content="Unravely"><meta property="og:title" content="PgSQL建表和造数据"><meta property="og:description" content="1. 建表模板 1.1. 建表 1.2. 复制表和数据 1.3. 触发器 2. 批量造数据 2.1. 建表 2.2. 函数生成随机汉字 2.3. 删除，执行函数 2.4. 插入数据 2.5. 常用函数"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-27T10:04:03.000Z"><meta property="article:modified_time" content="2024-12-27T10:04:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"PgSQL建表和造数据","image":[""],"dateModified":"2024-12-27T10:04:03.000Z","author":[]}</script><link rel="icon" href="logoY.webp"><title>PgSQL建表和造数据 | Unravely</title><meta name="description" content="1. 建表模板 1.1. 建表 1.2. 复制表和数据 1.3. 触发器 2. 批量造数据 2.1. 建表 2.2. 函数生成随机汉字 2.3. 删除，执行函数 2.4. 插入数据 2.5. 常用函数"><link rel="stylesheet" href="/assets/css/styles.9f8c62d0.css"><link rel="preload" href="/assets/js/runtime~app.58544f7b.js" as="script"><link rel="preload" href="/assets/css/styles.9f8c62d0.css" as="style"><link rel="preload" href="/assets/js/8707.0cd510f8.js" as="script"><link rel="preload" href="/assets/js/app.ba8f39a1.js" as="script"><link rel="prefetch" href="/assets/js/note_java_9503enie_index.html.88027093.js" as="script"><link rel="prefetch" href="/assets/js/9782.97eed80b.js" as="script"><link rel="prefetch" href="/assets/js/note_java_iqdmyedw_index.html.40138d2e.js" as="script"><link rel="prefetch" href="/assets/js/note_java_tuuncv26_index.html.f49a8c43.js" as="script"><link rel="prefetch" href="/assets/js/note_java_c1m5yzus_index.html.eda20bd2.js" as="script"><link rel="prefetch" href="/assets/js/note_java_7vvyda3z_index.html.c934cbdf.js" as="script"><link rel="prefetch" href="/assets/js/note_java_q276g3j7_index.html.793ade09.js" as="script"><link rel="prefetch" href="/assets/js/note_java_n06pdkxz_index.html.87242c7b.js" as="script"><link rel="prefetch" href="/assets/js/note_database_jwccemx4_index.html.a0697743.js" as="script"><link rel="prefetch" href="/assets/js/note_database_tuzwwskm_index.html.1379aedb.js" as="script"><link rel="prefetch" href="/assets/js/note_nginx_7qbey7od_index.html.7032463a.js" as="script"><link rel="prefetch" href="/assets/js/note_java_jpyab1x8_index.html.2e0fa0ee.js" as="script"><link rel="prefetch" href="/assets/js/note_java_ry666u5n_index.html.5d9e2ec9.js" as="script"><link rel="prefetch" href="/assets/js/note_java_omgxitxi_index.html.70e60475.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_id8y4ps0_index.html.0d2cadea.js" as="script"><link rel="prefetch" href="/assets/js/note_java_kx8v4uwu_index.html.34376c6a.js" as="script"><link rel="prefetch" href="/assets/js/note_database_tuzwwskn_index.html.20f8a2ed.js" as="script"><link rel="prefetch" href="/assets/js/note_docker_t6kwnf83_index.html.55f97bd3.js" as="script"><link rel="prefetch" href="/assets/js/article_bd79zupz_index.html.18d98c3f.js" as="script"><link rel="prefetch" href="/assets/js/article_doomx6i6_index.html.69b29cdc.js" as="script"><link rel="prefetch" href="/assets/js/note_maven_w8ms6rsv_index.html.e8a6b267.js" as="script"><link rel="prefetch" href="/assets/js/9013.addfefc7.js" as="script"><link rel="prefetch" href="/assets/js/8363.02016272.js" as="script"><link rel="prefetch" href="/assets/js/note_java_p9p781kr_index.html.8fc8029b.js" as="script"><link rel="prefetch" href="/assets/js/article_x7yjesb4_index.html.848bb79f.js" as="script"><link rel="prefetch" href="/assets/js/note_java_wo0j0b3u_index.html.04450da1.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_slbprv95_index.html.b586c459.js" as="script"><link rel="prefetch" href="/assets/js/note_java_ym9hi21c_index.html.630a947e.js" as="script"><link rel="prefetch" href="/assets/js/note_database_ek2wp44j_index.html.7738ec0c.js" as="script"><link rel="prefetch" href="/assets/js/note_java_3kml5lk3_index.html.6af185ab.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_2p382vdh_index.html.8cc74777.js" as="script"><link rel="prefetch" href="/assets/js/note_java_yunl3qqx_index.html.fbc4b79f.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_4cda7bs1_index.html.cdc83db1.js" as="script"><link rel="prefetch" href="/assets/js/note_maven_ab2mrv8r_index.html.92eb247b.js" as="script"><link rel="prefetch" href="/assets/js/note_java_w85d9xfa_index.html.3d62de39.js" as="script"><link rel="prefetch" href="/assets/js/note_nginx_tk4pjymq_index.html.3a53491e.js" as="script"><link rel="prefetch" href="/assets/js/note_java_xcd49nql_index.html.668299e4.js" as="script"><link rel="prefetch" href="/assets/js/note_database_zcg14808_index.html.68fdf90e.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_7wv2tb5s_index.html.b01841d9.js" as="script"><link rel="prefetch" href="/assets/js/note_database_yzbypphy_index.html.5236194b.js" as="script"><link rel="prefetch" href="/assets/js/note_database_r0a98sn5_index.html.e2ea686a.js" as="script"><link rel="prefetch" href="/assets/js/note_maven_ij0jkbrv_index.html.0eacb845.js" as="script"><link rel="prefetch" href="/assets/js/note_elk_w7ujpwhs_index.html.2467d180.js" as="script"><link rel="prefetch" href="/assets/js/note_git_xlko1vqa_index.html.6a032db4.js" as="script"><link rel="prefetch" href="/assets/js/note_nginx_index.html.9f72187e.js" as="script"><link rel="prefetch" href="/assets/js/note_git_bnkgifmf_index.html.e5b9144f.js" as="script"><link rel="prefetch" href="/assets/js/links_index.html.f475474c.js" as="script"><link rel="prefetch" href="/assets/js/article_nc6plnft_index.html.8346f903.js" as="script"><link rel="prefetch" href="/assets/js/note_database_r0a98sn4_index.html.d0fc5d6a.js" as="script"><link rel="prefetch" href="/assets/js/note_java_ao57y1x3_index.html.462e5b57.js" as="script"><link rel="prefetch" href="/assets/js/note_java_4z9inlqx_index.html.c5ad5c62.js" as="script"><link rel="prefetch" href="/assets/js/note_nginx_9qewynvt_index.html.8bc9eb64.js" as="script"><link rel="prefetch" href="/assets/js/article_yuubz445_index.html.0ee56fbd.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_wp2vbhh2_index.html.a2966571.js" as="script"><link rel="prefetch" href="/assets/js/article_ehir7gjs_index.html.417fdefa.js" as="script"><link rel="prefetch" href="/assets/js/note_docker_uhg19d4i_index.html.e9767b00.js" as="script"><link rel="prefetch" href="/assets/js/note_java_b90bkmy6_index.html.82d03f01.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_fgp9vqxp_index.html.91cb8ef1.js" as="script"><link rel="prefetch" href="/assets/js/article_7wv2tb5s_index.html.94d5be21.js" as="script"><link rel="prefetch" href="/assets/js/note_maven_j5w1cdfd_index.html.81fc25cd.js" as="script"><link rel="prefetch" href="/assets/js/note_java_uuc3b5fo_index.html.88bab7e8.js" as="script"><link rel="prefetch" href="/assets/js/note_database_z5nm1se4_index.html.da73f2a7.js" as="script"><link rel="prefetch" href="/assets/js/article_0u6gbxf8_index.html.14ac45b0.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_xauz4rzv_index.html.38009fef.js" as="script"><link rel="prefetch" href="/assets/js/about_index.html.740752c7.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_9un6uy6f_index.html.82e3627e.js" as="script"><link rel="prefetch" href="/assets/js/article_dk85g79h_index.html.7003b018.js" as="script"><link rel="prefetch" href="/assets/js/note_front_7rqt007c_index.html.c6fb54bf.js" as="script"><link rel="prefetch" href="/assets/js/article_h1x3d635_index.html.47e76170.js" as="script"><link rel="prefetch" href="/assets/css/6011.styles.3ce49466.css" as="style"><link rel="prefetch" href="/assets/js/article_0tv1arox_index.html.8e9ef9a6.js" as="script"><link rel="prefetch" href="/assets/js/note_java_bmkl7a01_index.html.10b4a01d.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_4bzyher2_index.html.20fadb2e.js" as="script"><link rel="prefetch" href="/assets/js/article_z50bi9d1_index.html.6eb2576e.js" as="script"><link rel="prefetch" href="/assets/js/note_java_1u06xuj9_index.html.d2957697.js" as="script"><link rel="prefetch" href="/assets/js/note_java_12hevmg6_index.html.9b704c51.js" as="script"><link rel="prefetch" href="/assets/js/note_database_index.html.54fd76f3.js" as="script"><link rel="prefetch" href="/assets/js/note_docker_index.html.cb9fda4c.js" as="script"><link rel="prefetch" href="/assets/js/note_java_index.html.d357313b.js" as="script"><link rel="prefetch" href="/assets/js/note_linux_index.html.ead05a13.js" as="script"><link rel="prefetch" href="/assets/js/note_elk_index.html.1dc26114.js" as="script"><link rel="prefetch" href="/assets/js/yaodfnr6_index.html.1c5234d6.js" as="script"><link rel="prefetch" href="/assets/js/index.html.311958a2.js" as="script"><link rel="prefetch" href="/assets/js/note_database_yaodfnr6_index.html.654a11bb.js" as="script"><link rel="prefetch" href="/assets/js/note_front_y237gxif_index.html.2df64b3e.js" as="script"><link rel="prefetch" href="/assets/js/note_front_index.html.34e4551b.js" as="script"><link rel="prefetch" href="/assets/js/note_maven_index.html.2765502f.js" as="script"><link rel="prefetch" href="/assets/js/note_git_index.html.bbd8e874.js" as="script"><link rel="prefetch" href="/assets/js/404.html.bb4195f5.js" as="script"><link rel="prefetch" href="/assets/js/blog_categories_index.html.17ac7cd5.js" as="script"><link rel="prefetch" href="/assets/js/blog_archives_index.html.4ec00c6b.js" as="script"><link rel="prefetch" href="/assets/js/blog_tags_index.html.7d89be2d.js" as="script"><link rel="prefetch" href="/assets/js/blog_index.html.51d23bee.js" as="script"><link rel="prefetch" href="/assets/css/5761.styles.e3e917da.css" as="style"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-82492cc4><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-e21b6ea2></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-e21b6ea2> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-82492cc4 data-v-66bd2842><div class="vp-navbar" vp-navbar data-v-66bd2842 data-v-11b4f2ad><div class="wrapper" data-v-11b4f2ad><div class="container" data-v-11b4f2ad><div class="title" data-v-11b4f2ad><div class="vp-navbar-title has-sidebar" data-v-11b4f2ad data-v-737698f6><a class="vp-link no-icon link title" href="/" data-v-737698f6 data-v-3a9b8670><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/logoY.webp" alt data-v-20ceff60><!--]--><!--[--><img class="vp-image light logo" src="/logoY.webp" alt data-v-20ceff60><!--]--><!--]--><!--]--><span data-v-737698f6 data-v-3a9b8670-s>Unravely</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-11b4f2ad><div class="content-body" data-v-11b4f2ad><!--[--><!--]--><div class="vp-navbar-search search" data-v-11b4f2ad><div class="search-wrapper" data-v-a2a3f998><!----><div id="local-search" data-v-a2a3f998><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-a2a3f998><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-11b4f2ad data-v-71912f8b><span id="main-nav-aria-label" class="visually-hidden" data-v-71912f8b>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-71912f8b data-v-2269fc4c data-v-3a9b8670><!--[--><!----><span data-v-2269fc4c data-v-3a9b8670-s>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-71912f8b data-v-2269fc4c data-v-3a9b8670><!--[--><!----><span data-v-2269fc4c data-v-3a9b8670-s>博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-71912f8b data-v-7f5e5669><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f5e5669><span class="text" data-v-7f5e5669><!----><!----><span data-v-7f5e5669>笔记</span><span class="vpi-chevron-down text-icon" data-v-7f5e5669></span></span></button><div class="menu" data-v-7f5e5669><div class="vp-menu" data-v-7f5e5669 data-v-f11a560a><div class="items" data-v-f11a560a><!--[--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_java/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> Java<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_linux/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> Linux<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_database/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> database<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_docker/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> docker<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_maven/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> Maven<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_git/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> Git<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_nginx/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> Nginx<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_front/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> 前端<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f11a560a data-v-4bfc4f72><a class="vp-link no-icon link" href="/note_elk/" data-v-4bfc4f72 data-v-3a9b8670><!--[--><!----> ELK<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/links/" tabindex="0" data-v-71912f8b data-v-2269fc4c data-v-3a9b8670><!--[--><!----><span data-v-2269fc4c data-v-3a9b8670-s>链接</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/about/" tabindex="0" data-v-71912f8b data-v-2269fc4c data-v-3a9b8670><!--[--><!----><span data-v-2269fc4c data-v-3a9b8670-s>关于</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-11b4f2ad data-v-148c07dd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-148c07dd data-v-214cc414 data-v-208762d2><span class="check" data-v-208762d2><span class="icon" data-v-208762d2><!--[--><span class="vpi-sun sun" data-v-214cc414></span><span class="vpi-moon moon" data-v-214cc414></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-11b4f2ad data-v-87ef740c data-v-6ee11084><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-6ee11084 data-v-709532f8><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-11b4f2ad data-v-43cf5f93 data-v-7f5e5669><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-7f5e5669><span class="vpi-more-horizontal icon" data-v-7f5e5669></span></button><div class="menu" data-v-7f5e5669><div class="vp-menu" data-v-7f5e5669 data-v-f11a560a><!----><!--[--><!--[--><!----><div class="group" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s><div class="item appearance" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s><p class="label" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s>外观</p><div class="appearance-action" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s data-v-214cc414 data-v-208762d2><span class="check" data-v-208762d2><span class="icon" data-v-208762d2><!--[--><span class="vpi-sun sun" data-v-214cc414></span><span class="vpi-moon moon" data-v-214cc414></span><!--]--></span></span></button></div></div></div><div class="group" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s><div class="item social-links" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s><div class="vp-social-links social-links-list" data-v-43cf5f93 data-v-7f5e5669-s data-v-f11a560a-s data-v-6ee11084><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-6ee11084 data-v-709532f8><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-11b4f2ad data-v-fec2868e><span class="container" data-v-fec2868e><span class="top" data-v-fec2868e></span><span class="middle" data-v-fec2868e></span><span class="bottom" data-v-fec2868e></span></span></button></div></div></div></div><div class="divider" data-v-11b4f2ad><div class="divider-line" data-v-11b4f2ad></div></div></div><!----></header><div class="vp-local-nav reached-top is-blog" data-v-82492cc4 data-v-1532e228><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-1532e228><span class="vpi-align-left menu-icon" data-v-1532e228></span><span class="menu-text" data-v-1532e228>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-1532e228 data-v-e8ec8e50><button data-v-e8ec8e50>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-82492cc4 data-v-237d6e7b><div class="curtain" data-v-237d6e7b></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-237d6e7b><span id="sidebar-aria-label" class="visually-hidden" data-v-237d6e7b> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-6c96e643><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-6c96e643 data-v-36c7c560><div class="item" role="button" tabindex="0" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><h2 class="text" data-v-36c7c560>数据结构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-36c7c560><span class="vpi-chevron-right caret-icon" data-v-36c7c560></span></div></div><div class="items" data-v-36c7c560><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/z5nm1se4/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>B+Tree和B-Tree区别</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6c96e643><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-6c96e643 data-v-36c7c560><div class="item" role="button" tabindex="0" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><h2 class="text" data-v-36c7c560>PostgreSQL</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-36c7c560><span class="vpi-chevron-right caret-icon" data-v-36c7c560></span></div></div><div class="items" data-v-36c7c560><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/tuzwwskm/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>PgSQL建表和造数据</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/r0a98sn5/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>创建递增主键</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/yzbypphy/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>常用SQL</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/yaodfnr6/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>PgSql索引</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6c96e643><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-6c96e643 data-v-36c7c560><div class="item" role="button" tabindex="0" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><h2 class="text" data-v-36c7c560>MySQL</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-36c7c560><span class="vpi-chevron-right caret-icon" data-v-36c7c560></span></div></div><div class="items" data-v-36c7c560><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/tuzwwskn/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>MySQL建表和造数据</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/r0a98sn4/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>创建递增序列</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/jwccemx4/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>增删改查</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/yaodfnr6/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>PgSql索引</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/zcg14808/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>MySql索引类型和命中规则</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6c96e643><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-6c96e643 data-v-36c7c560><div class="item" role="button" tabindex="0" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><h2 class="text" data-v-36c7c560>Embedded</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-36c7c560><span class="vpi-chevron-right caret-icon" data-v-36c7c560></span></div></div><div class="items" data-v-36c7c560><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-36c7c560 data-v-36c7c560><div class="item" data-v-36c7c560><div class="indicator" data-v-36c7c560></div><!----><a class="vp-link no-icon link link" href="/note_database/ek2wp44j/" data-v-36c7c560 data-v-3a9b8670><!--[--><p class="text" data-v-36c7c560 data-v-3a9b8670-s>H2数据库使用和配置</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-82492cc4 data-v-6c3da964><div class="has-sidebar has-aside vp-doc-container" data-v-5d0ffb7c><!--[--><!--]--><div class="container" data-v-5d0ffb7c><div class="aside" vp-outline data-v-5d0ffb7c><div class="aside-curtain" data-v-5d0ffb7c></div><div class="aside-container" data-v-5d0ffb7c><div class="aside-content" data-v-5d0ffb7c><div class="vp-doc-aside" data-v-5d0ffb7c data-v-1520589e><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-1520589e data-v-d513ed8a><div class="content" data-v-d513ed8a><div class="outline-marker" data-v-d513ed8a></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-d513ed8a><span data-v-d513ed8a>此页内容</span><span class="vpi-print icon" data-v-d513ed8a></span></div><ul class="root" data-v-d513ed8a data-v-0c3c8380><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-1520589e></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-5d0ffb7c><div class="content-container" data-v-5d0ffb7c><!--[--><!--]--><main class="main" data-v-5d0ffb7c><nav class="vp-breadcrumb" data-v-5d0ffb7c data-v-052e7c80><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-052e7c80><!--[--><li property="itemListElement" typeof="ListItem" data-v-052e7c80><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-052e7c80 data-v-3a9b8670><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-052e7c80></span><meta property="name" content="首页" data-v-052e7c80><meta property="position" content="1" data-v-052e7c80></li><li property="itemListElement" typeof="ListItem" data-v-052e7c80><span class="vp-link no-icon breadcrumb" href="/" property="item" typeof="WebPage" data-v-052e7c80 data-v-3a9b8670><!--[-->PostgreSQL<!--]--><!----></span><span class="vpi-chevron-right" data-v-052e7c80></span><meta property="name" content="PostgreSQL" data-v-052e7c80><meta property="position" content="2" data-v-052e7c80></li><li property="itemListElement" typeof="ListItem" data-v-052e7c80><a class="vp-link no-icon link breadcrumb current" href="/note_database/tuzwwskm/" property="item" typeof="WebPage" data-v-052e7c80 data-v-3a9b8670><!--[-->PgSQL建表和造数据<!--]--><!----></a><!----><meta property="name" content="PgSQL建表和造数据" data-v-052e7c80><meta property="position" content="3" data-v-052e7c80></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-17462bac>PgSQL建表和造数据 <!----></h1><div class="vp-doc-meta" data-v-17462bac><p class="reading-time" data-v-17462bac><span class="vpi-books icon" data-v-17462bac></span><span data-v-17462bac>1649字</span><span data-v-17462bac>约6分钟</span></p><!----><p class="create-time" data-v-17462bac><span class="vpi-clock icon" data-v-17462bac></span><span data-v-17462bac>2024-12-27</span></p></div><!--]--><div class="vp-doc plume-content _note_database_tuzwwskm_ external-link-icon-enabled" vp-content data-v-5d0ffb7c><h2 id="_1-建表模板" tabindex="-1"><a class="header-anchor" href="#_1-建表模板"><span>1. 建表模板</span></a></h2><h3 id="_1-1-建表" tabindex="-1"><a class="header-anchor" href="#_1-1-建表"><span>1.1. 建表</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">drop</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> book</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    id               </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">bigserial</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> not null</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    title            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">             varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    author           </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    price            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">numeric</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      default</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    book_code        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publisher        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publication_year </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">date</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    create_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    update_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on table book is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">book信息表</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on column book.author is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">作者</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on column book.publisher is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">出版社</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> index_corp_id2</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">USING</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> btree (book_code);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> index_record2</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">USING</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> btree (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, book_code);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">drop</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> library;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> library</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    id               </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">bigserial</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> not null</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    title            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">             varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    author           </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    price            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">numeric</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      default</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    book_code        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publisher        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publication_year </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">date</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    create_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    update_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_1-2-复制表和数据" tabindex="-1"><a class="header-anchor" href="#_1-2-复制表和数据"><span>1.2. 复制表和数据</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">DROP</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TABLE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> IF</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> EXISTS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">public</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">customer_info_0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TABLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> &quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">customer_info_0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">               serial8 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">corp_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">          varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">50</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">not null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">external_type</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    int2,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">union_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">         varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">50</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">add_way</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">          varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">not null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">add_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">         timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">not null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">is_loss</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          bool         </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> false,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">loss_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tag_list</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">         text</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">update_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">default</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;id&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">主键</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;corp_id&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">企业CorpId</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;name&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">外部联系人的名称</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;external_type&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">外部联系人的类型，1表示该外部联系人是微信用户，2表示该外部联系人是企业微信用户</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;union_id&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">外部联系人在微信开放平台的唯一身份标识（微信UnionId）</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;add_way&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">客户来源：0-未知来源，1-扫描二维码，2-搜索手机号，3-名片分享，4-群聊，5-手机通讯录，6-微信联系人，8-安装第三方应用时自动添加的客服人员，9-搜索邮箱，10-视频号添加，11-通过日程参与人添加，12-通过会议参与人添加，13-添加微信好友对应的企业微信，14-通过智慧硬件专属客服添加，15-通过上门服务客服添加，201-内部成员共享，202-管理员/负责人分配。</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;add_time&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">该成员添加此外部联系人的时间</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;is_loss&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">客户流失状态：false-正常，true-客户删员工</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;loss_time&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">客户删员工时间</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;tag_list&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">客户标签列表</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;create_time&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">创建时间</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;customer_info_0&quot;.&quot;update_time&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">更新时间</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON TABLE &quot;public&quot;.&quot;customer_info_0&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">客户信息</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 索引</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> idx_customer_info_1</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> customer_info_0 (union_id);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> idx_customer_info_2</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> customer_info_0 (corp_id, external_type);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 复制当前表并重新命名</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> customer_info_1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">like</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> customer_info_0 INCLUDING INDEXES INCLUDING COMMENTS);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> customer_info_2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">like</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> customer_info_0 INCLUDING INDEXES INCLUDING COMMENTS);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_1-3-触发器" tabindex="-1"><a class="header-anchor" href="#_1-3-触发器"><span>1.3. 触发器</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 创建update_time触发器，实现自动更新时间戳 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create or replace</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> update_timestamp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> returns</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> trigger </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">as</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$$</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">update_time</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> current_timestamp;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> new;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$$</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    language</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> plpgsql;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">DROP</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TABLE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> IF</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> EXISTS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">public</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sys_department</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TABLE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> &quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sys_department</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">obj_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            serial8 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                int4,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">corp_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">           varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">open_corp_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">              varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">50</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name_en</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">           varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">50</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">department_leader</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">50</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">parent_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">         int4,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sort_order</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        int4,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">       timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">DEFAULT</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">update_time</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">       timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;sys_department&quot;.&quot;obj_id&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">主键</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON COLUMN &quot;public&quot;.&quot;sys_department&quot;.&quot;sort_order&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">在父部门中的次序值。order值大的排序靠前。值范围是[0, 2^32)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COMMENT ON TABLE &quot;public&quot;.&quot;sys_department&quot; IS </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">部门信息</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 创建索引</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> index_sys_department</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys_department (corp_id);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 实现update_time自动更新时间戳</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TRIGGER</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> trigger_sys_department</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    BEFORE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> UPDATE</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys_department</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    FOR</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> EACH </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ROW</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">EXECUTE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> PROCEDURE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> update_timestamp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_2-批量造数据" tabindex="-1"><a class="header-anchor" href="#_2-批量造数据"><span>2. 批量造数据</span></a></h2><h3 id="_2-1-建表" tabindex="-1"><a class="header-anchor" href="#_2-1-建表"><span>2.1. 建表</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">drop</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> table</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> book</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    id               </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">bigserial</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    not null</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    title            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">             varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    author           </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    price            </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">numeric</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> default</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    book_code        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publisher        </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    remark           </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">text</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    publication_year </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">date</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    create_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    update_time      </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamp</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on table book is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">book信息表</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on column book.author is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">作者</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">comment on column book.publisher is </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">出版社</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> index_corp_id</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">USING</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> btree (book_code);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CREATE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> INDEX</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> index_record</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ON</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">USING</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> btree (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, book_code);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_2-2-函数生成随机汉字" tabindex="-1"><a class="header-anchor" href="#_2-2-函数生成随机汉字"><span>2.2. 函数生成随机汉字</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">create or replace</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> gen_hanzi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">returns</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> text</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> as</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $$</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">declare</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    res </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">text</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        -- 汉字从从19968开始，一共20901个汉字，</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> string_agg</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(chr(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">19968</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20901</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">), </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">into</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> res </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,$</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> res;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">end</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$$ </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">language</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> plpgsql strict;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-删除-执行函数" tabindex="-1"><a class="header-anchor" href="#_2-3-删除-执行函数"><span>2.3. 删除，执行函数</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">drop</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> function</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> gen_hanzi(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> gen_hanzi(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-插入数据" tabindex="-1"><a class="header-anchor" href="#_2-4-插入数据"><span>2.4. 插入数据</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">do $$</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    declare</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> num </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    begin</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        while</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> num </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3000000</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> loop</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            insert into</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> book</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            (title,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,author,price,book_code,publisher,publication_year,create_time,update_time)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            values</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                (gen_hanzi(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),gen_hanzi(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                 (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[&#39;Shakespeare&#39;,&#39;Homer&#39;,&#39;Cervantes&#39;,&#39;Dante&#39;,&#39;Vergil&#39;,&#39;Plato&#39;,&#39;Helen-Keller&#39;,&#39;Mark-simon&#39;,&#39;Jack-Chen&#39;,&#39;Mark-Twain&#39;,&#39;Jack-London&#39;,&#39;Tagore&#39;,&#39;Hemingway&#39;,&#39;Voltaire&#39;,&#39;Charles-Dickens&#39;,&#39;Jane-Austen&#39;])[floor(random()*16)::int+1],</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">                 substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生成2位数字</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">                 substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(md5(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">), </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生成10位字符串</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                    -- 随机在数组里选择几项</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                 (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[&#39;人民教育出版社&#39;,&#39;人民文学出版社&#39;,&#39;人民出版社&#39;,&#39;三联书店&#39;,&#39;中华书局&#39;,&#39;上海译文出版社&#39;,&#39;科学教育出版&#39;,&#39;中信出版社&#39;,&#39;科学出版&#39;])[floor(random()*9)::int+1],</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                    -- 随机生成日期 格式：yyyy-MM-dd</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">                 concat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,make_time(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">date</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                    -- 随机生成日期 格式：yyyy-MM-dd HH:mm:ss</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">                 concat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,make_time(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamptz</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">                 concat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,make_time(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamptz</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                );</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            num </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> num </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        end</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> loop</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    end</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$$;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h3 id="_2-5-常用函数" tabindex="-1"><a class="header-anchor" href="#_2-5-常用函数"><span>2.5. 常用函数</span></a></h3><div class="language-sql line-numbers-mode has-collapsed collapsed" data-ext="sql" data-title="sql" style="--vp-collapsed-lines:20;"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生成8位数的数字</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> md5(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">text</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生产9位长度的大写字符串</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> upper</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(md5(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 数组随机取值</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[&#39;aaaaa&#39;,&#39;bbbbb&#39;,&#39;ccccc&#39;,&#39;ddddd&#39;,&#39;eeeee&#39;,&#39;fffff&#39;])[floor(random()*4)::int+1];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机在62个字母里选20个</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> array_to_string(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ceil(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 62</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FOR</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)), </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生成时间 生成日期::date</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> concat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,make_time(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">timestamptz</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生产指定长度N的字符串</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> upper</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(array_to_string(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ceil(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 62</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FOR</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, N)), </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 输出大写字母</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> chr(int4(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">65</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机字母</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> chr(int4(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">65</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机4位字母</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> repeat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">( chr(int4(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">65</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 拼接截取字符串</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">postgre</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">||</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">substr(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mySql</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 数组随机取值</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[&#39;张三&#39;,&#39;李四&#39;,&#39;王五&#39;,&#39;赵六&#39;])[floor(random()*4)::int+1];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机数字 十位不超过6的3位数</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">^</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机输出10以内的整数</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 三位数</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">^</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 8位字符串</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(md5(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 8位数字</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生成N位字符串</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> upper</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(array_to_string(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">array</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> substring</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ceil(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 62</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FOR</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, N)), </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生产日期 2022-09-08 03:27:36</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> concat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,make_time(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">-- 随机生产日期 2022-09-19</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> current_date </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> floor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">((random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">insert into</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> t_test </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> generate_series</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">as</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">repeat</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">( chr(int4(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">26</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">65</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">), (random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">^</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,(random</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">^</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">))::</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">integer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></div></main><footer class="vp-doc-footer" data-v-5d0ffb7c data-v-5d8589e4><!--[--><!--]--><!----><!----><nav class="prev-next" data-v-5d8589e4><div class="pager" data-v-5d8589e4><a class="vp-link no-icon link pager-link prev" href="/note_database/z5nm1se4/" data-v-5d8589e4 data-v-3a9b8670><!--[--><span class="desc" data-v-5d8589e4 data-v-3a9b8670-s>上一页</span><span class="title" data-v-5d8589e4 data-v-3a9b8670-s>B+Tree和B-Tree区别</span><!--]--><!----></a></div><div class="pager" data-v-5d8589e4><a class="vp-link no-icon link pager-link next" href="/note_database/r0a98sn5/" data-v-5d8589e4 data-v-3a9b8670><!--[--><span class="desc" data-v-5d8589e4 data-v-3a9b8670-s>下一页</span><span class="title" data-v-5d8589e4 data-v-3a9b8670-s>创建递增主键</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-82492cc4 data-v-04217528><span class="percent" data-allow-mismatch data-v-04217528>0%</span><span class="show icon vpi-back-to-top" data-v-04217528></span><svg aria-hidden="true" data-v-04217528><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-04217528></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-82492cc4 data-v-0a2e3c93><!--[--><div class="container" data-v-0a2e3c93><p class="message" data-v-0a2e3c93><a href="https://beian.miit.gov.cn/" target="_blank">鄂ICP备2024082911号-1</a></p><p class="copyright" data-v-0a2e3c93>Copyright © 2024 unravely</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script src="/assets/js/runtime~app.58544f7b.js" defer></script><script src="/assets/js/8707.0cd510f8.js" defer></script><script src="/assets/js/app.ba8f39a1.js" defer></script></body></html>